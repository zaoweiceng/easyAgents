# Agent ç¤ºä¾‹ä»£ç 

æœ¬ç›®å½•åŒ…å«äº†å®Œæ•´çš„Agentç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºäº†å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰Agentã€‚

## ğŸ“ æ–‡ä»¶è¯´æ˜

### 1. demo_agent.pyï¼ˆæ¨èé¦–å…ˆé˜…è¯»ï¼‰
**åŠŸèƒ½**: æ•°å­¦è®¡ç®—Agent

**ç‰¹ç‚¹**:
- âœ… å®Œæ•´çš„ä»£ç æ³¨é‡Š
- âœ… æ¸…æ™°çš„ç»“æ„è¯´æ˜
- âœ… 3ç§è¿”å›æ–¹å¼ç¤ºä¾‹
- âœ… é”™è¯¯å¤„ç†æœ€ä½³å®è·µ
- âœ… åŒ…å«å¼€å‘å»ºè®®å’ŒæŠ€å·§

**é€‚ç”¨åœºæ™¯**: å­¦ä¹ å¦‚ä½•åˆ›å»ºAgentçš„ç¬¬ä¸€æ‰‹èµ„æ–™

**å¿«é€Ÿä½“éªŒ**:
```bash
# å¤åˆ¶åˆ°pluginç›®å½•
cp demo_agent.py ../plugin/

# æµ‹è¯•è¿è¡Œ
cd ..
python main.py "è®¡ç®— 123 åŠ  456"
```

### 2. sql_agent.py
**åŠŸèƒ½**: SQLæŸ¥è¯¢Agent

**ç‰¹ç‚¹**:
- å±•ç¤ºå¦‚ä½•é›†æˆæ•°æ®åº“æŸ¥è¯¢
- æ¨¡æ‹ŸçœŸå®çš„æ•°æ®æŸ¥è¯¢åœºæ™¯
- è¿”å›ç»“æ„åŒ–æ•°æ®

**é€‚ç”¨åœºæ™¯**: å­¦ä¹ å¦‚ä½•å¤„ç†æ•°æ®æŸ¥è¯¢å’Œç»“æœè¿”å›

**å¿«é€Ÿä½“éªŒ**:
```bash
# å¤åˆ¶åˆ°pluginç›®å½•
cp sql_agent.py ../plugin/

# æµ‹è¯•è¿è¡Œ
cd ..
python main.py "æŸ¥è¯¢idä¸º2çš„å›¾ä¹¦ä¿¡æ¯"
```

## ğŸš€ ä½¿ç”¨æ­¥éª¤

### æ–¹æ³•1: ç›´æ¥æµ‹è¯•ï¼ˆæ¨èï¼‰

```bash
# 1. è¿›å…¥é¡¹ç›®æ ¹ç›®å½•
cd /path/to/easyAgent

# 2. å¤åˆ¶ç¤ºä¾‹æ–‡ä»¶åˆ°pluginç›®å½•
cp example/demo_agent.py plugin/

# 3. æ— éœ€é‡å¯ï¼ç›´æ¥æµ‹è¯•
python main.py "è®¡ç®— 123 åŠ  456"
```

### æ–¹æ³•2: ä½œä¸ºå‚è€ƒå¼€å‘æ–°Agent

```bash
# 1. å¤åˆ¶ç¤ºä¾‹æ–‡ä»¶ä½œä¸ºæ¨¡æ¿
cp example/demo_agent.py plugin/my_agent.py

# 2. ç¼–è¾‘æ–‡ä»¶ï¼Œä¿®æ”¹ç±»åå’Œé€»è¾‘
vim plugin/my_agent.py

# 3. ç³»ç»Ÿä¼šè‡ªåŠ¨åŠ è½½æ–°Agent
python main.py "æµ‹è¯•ä½ çš„æ–°Agent"
```

## ğŸ“š å­¦ä¹ è·¯å¾„

### åˆå­¦è€…
1. é˜…è¯» `demo_agent.py` çš„å®Œæ•´ä»£ç 
2. ç†è§£Agentçš„ä¸‰ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼š
   - `__init__()`: é…ç½®Agentä¿¡æ¯
   - `prompt_template`: æç¤ºè¯æ¨¡æ¿
   - `run()`: æ ¸å¿ƒå¤„ç†é€»è¾‘
3. å¤åˆ¶åˆ°pluginç›®å½•æµ‹è¯•è¿è¡Œ
4. å°è¯•ä¿®æ”¹è®¡ç®—é€»è¾‘ï¼Œè§‚å¯Ÿæ•ˆæœ

### è¿›é˜¶å¼€å‘è€…
1. å¯¹æ¯” `demo_agent.py` å’Œ `sql_agent.py`
2. å­¦ä¹ ä¸åŒçš„è¿”å›æ–¹å¼ï¼ˆMessage vs Dictï¼‰
3. ç†è§£Agentåä½œæœºåˆ¶ï¼ˆnext_agentå­—æ®µï¼‰
4. æŸ¥çœ‹å†…ç½®Agentå®ç°ï¼ˆ`core/agents/`ï¼‰

### é«˜çº§ç”¨æ³•
1. ç ”ç©¶ `core/agents/demand_agent.py` - éœ€æ±‚å¤„ç†
2. ç ”ç©¶ `core/agents/mcp_agent.py` - MCPåè®®é›†æˆ
3. åˆ›å»ºæ”¯æŒå¤æ‚äº¤äº’çš„Agent
4. å®ç°Agenté—´çš„ä»»åŠ¡ä¼ é€’

## ğŸ”‘ å…³é”®æ¦‚å¿µ

### Agentä¸‰è¦ç´ 

1. **åŸºæœ¬ä¿¡æ¯** (`__init__`)
   - `name`: Agentå”¯ä¸€æ ‡è¯†
   - `description`: åŠŸèƒ½æè¿°ï¼ˆå¸®åŠ©LLMç†è§£ï¼‰
   - `handles`: è§¦å‘å…³é”®è¯åˆ—è¡¨

2. **æç¤ºè¯æ¨¡æ¿** (`prompt_template`)
   - `system_instructions`: è§’è‰²å®šä¹‰
   - `core_instructions`: ä»»åŠ¡æµç¨‹
   - `data_fields`: æ•°æ®ç»“æ„è¯´æ˜

3. **å¤„ç†é€»è¾‘** (`run()`)
   - è¾“å…¥: `Message` å¯¹è±¡
   - å¤„ç†: ä¸šåŠ¡é€»è¾‘
   - è¾“å‡º: `Message` / `Dict` / å…¶ä»–ç±»å‹

### è¿”å›å€¼ç±»å‹

```python
# æ–¹å¼1: Messageï¼ˆå®Œå…¨æ§åˆ¶ï¼‰
return Message(
    status="success",
    data={"key": "value"},
    next_agent="none"  # æˆ–å…¶ä»–Agentåç§°
)

# æ–¹å¼2: Dictï¼ˆç³»ç»Ÿè‡ªåŠ¨å°è£…ï¼‰
return {"result": data}

# æ–¹å¼3: ç®€å•å€¼ï¼ˆç³»ç»ŸåŒ…è£…ï¼‰
return result
```

## ğŸ’¡ å¼€å‘æŠ€å·§

### 1. å¿«é€Ÿæµ‹è¯•
```bash
# CLIæ¨¡å¼ - å¿«é€Ÿè¿­ä»£
python main.py "æµ‹è¯•æ¶ˆæ¯"

# æµå¼è¾“å‡º - å®æ—¶æŸ¥çœ‹
python main.py --stream "æµ‹è¯•æ¶ˆæ¯"
```

### 2. æŸ¥çœ‹æ—¥å¿—
```python
import logging
logger = logging.getLogger(__name__)
logger.info("å…³é”®æ“ä½œ")
logger.error("é”™è¯¯ä¿¡æ¯")
```

### 3. é”™è¯¯å¤„ç†
```python
try:
    result = process()
except Exception as e:
    return Message(
        status="error",
        data={"error": str(e)},
        next_agent="none",
        message=f"å¤„ç†å¤±è´¥: {e}"
    )
```

### 4. Agentåä½œ
```python
# ç»§ç»­å¤„ç†
return data  # è‡ªåŠ¨ä¼ é€’ç»™general_agent

# ç»“æŸæµç¨‹
return Message(next_agent="none")

# æŒ‡å®šä¸‹ä¸€ä¸ªAgent
return Message(next_agent="other_agent")
```

## ğŸ› å¸¸è§é—®é¢˜

### Q1: Agentæ²¡æœ‰è¢«åŠ è½½ï¼Ÿ
**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
- æ–‡ä»¶æ˜¯å¦åœ¨ `plugin/` ç›®å½•ä¸‹
- æ–‡ä»¶åæ ¼å¼ï¼š`xxx_agent.py`
- ç±»åæ ¼å¼ï¼š`XxxAgent`
- æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼ˆè¿è¡Œ `python -m py_compile plugin/xxx_agent.py` æ£€æŸ¥ï¼‰

### Q2: Agentæ²¡æœ‰è¢«è°ƒç”¨ï¼Ÿ
**A**:
- æ£€æŸ¥ `description` æ˜¯å¦æ¸…æ™°æè¿°äº†åŠŸèƒ½
- æ£€æŸ¥ `handles` å…³é”®è¯æ˜¯å¦åŒ…å«ç›¸å…³è¯æ±‡
- æŸ¥çœ‹æ—¥å¿—ï¼Œäº†è§£LLMçš„é€‰æ‹©é€»è¾‘

### Q3: è¿”å›æ•°æ®æ²¡æœ‰è¢«æ­£ç¡®å¤„ç†ï¼Ÿ
**A**:
- ç¡®è®¤è¿”å›å€¼ç±»å‹ï¼ˆMessage/Dict/å…¶ä»–ï¼‰
- æ£€æŸ¥ `next_agent` æ˜¯å¦æ­£ç¡®è®¾ç½®
- æŸ¥çœ‹æ—¥å¿—ä¸­çš„æ•°æ®æµè½¬

## ğŸ“– æ›´å¤šèµ„æº

- [ä¸»README](../README.md) - é¡¹ç›®æ¦‚è¿°
- [åˆ›å»ºè‡ªå®šä¹‰AgentæŒ‡å—](../README.md#-åˆ›å»ºè‡ªå®šä¹‰agent) - è¯¦ç»†æ•™ç¨‹
- [å†…ç½®Agent](../core/agents/) - å®˜æ–¹Agentå®ç°